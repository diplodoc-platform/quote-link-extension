# Diplodoc quote link extension

[![NPM version](https://img.shields.io/npm/v/@diplodoc/quote-link-extension.svg?style=flat)](https://www.npmjs.org/package/@diplodoc/quote-link-extension)
[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=diplodoc-platform_quote-link-extension&metric=alert_status)](https://sonarcloud.io/summary/overall?id=diplodoc-platform_quote-link-extension)
[![Coverage](https://sonarcloud.io/api/project_badges/measure?project=diplodoc-platform_quote-link-extension&metric=coverage)](https://sonarcloud.io/summary/overall?id=diplodoc-platform_quote-link-extension)
[![Maintainability Rating](https://sonarcloud.io/api/project_badges/measure?project=diplodoc-platform_quote-link-extension&metric=sqale_rating)](https://sonarcloud.io/summary/overall?id=diplodoc-platform_quote-link-extension)
[![Reliability Rating](https://sonarcloud.io/api/project_badges/measure?project=diplodoc-platform_quote-link-extension&metric=reliability_rating)](https://sonarcloud.io/summary/overall?id=diplodoc-platform_quote-link-extension)
[![Security Rating](https://sonarcloud.io/api/project_badges/measure?project=diplodoc-platform_quote-link-extension&metric=security_rating)](https://sonarcloud.io/summary/overall?id=diplodoc-platform_quote-link-extension)

This is an extension of the Diplodoc platform, which allows adding quote links in the documentation.

The extension contains some parts:

- [Prepared runtime](#prepared-runtime)
- [MarkdownIt transform plugin](#markdownit-transform-plugin)

## Quickstart

Attach the plugin to the transformer:

```js
import quoteLinkExtension from '@diplodoc/quote-link-extension';
import transform from '@diplodoc/transform';

const {result} = await transform(
  `
> [link title](http://example.ru){data-quotelink="true"}
>
> link content
`,
  {
    plugins: [quoteLinkExtension.transform({bundle: false})],
  },
);
```

## Prepared runtime

It is necessary to add `runtime` scripts to make quote links interactive on your page.<br/>
You can add assets files which were generated by the [MarkdownIt transform plugin](#markdownit-transform-plugin).

```html
<html>
  <head>
    <!-- Read more about '_assets/quote-link-extension.js' and '_assets/quote-link-extension.css' in 'Transform plugin' section -->
    <script src="_assets/quote-link-extension.js" async></script>
    <link rel="stylesheet" href="_assets/quote-link-extension.css" />
  </head>
  <body>
    ${result.html}
  </body>
</html>
```

Or you can just include runtime's source code in your bundle.

```js
import '@diplodoc/quote-link-extension/runtime';
import '@diplodoc/quote-link-extension/runtime/styles.css';
```

## Public css variables

`--yfm-quote-link-background` - sets the background color for the quote link. By default `rgb(242, 242, 242)`. For the dark theme you can use `rgb(56, 52, 56)`.
`--yfm-quote-link-background-hover` - sets the background color for the quote link on hover. By default `rgba(0, 0, 0, 0.05)`. For the dark theme you can use `rgba(255, 255, 255, 0.1)`.

## MarkdownIt transform plugin

Plugin for [@diplodoc/transform](https://github.com/diplodoc-platform/transform) package.

Options:

- `runtime.script` - name on runtime script which will be exposed in results `script` section.<br>
  Default: `_assets/quote-link-extension.js`<br>

- `runtime.style` - name on runtime css file which will be exposed in results `style` section.<br>
  (Default: `_assets/quote-link-extension.css`)<br>

- `bundle` - boolean flag to enable/disable copying of bundled runtime to target directory.<br>
  Where target directore is `<transformer output option>/<plugin runtime option>`<br>
  Default: `true`<br>

## Documentation

- **For AI agents and developers** â€” see [AGENTS.md](AGENTS.md) for setup, scripts, and contribution notes.
